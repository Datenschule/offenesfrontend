<div>
    <div class="filters container-left-16">
        <h1>Filtern nach</h1>
        <div class="options" ng-class="{hasSelect: $ctrl.selectedFilter !== ''}">
            <button class="topic"
                    ng-class="{selected: $ctrl.selectedFilter === 'topic'}"
                    ng-click="$ctrl.selectFilter('topic')">
                📂 <span class="text">Thema</span>
                <img src="/static/img/icons/triangle_bottom.svg"/>
            </button>
            <button class="person"
                    ng-class="{selected: $ctrl.selectedFilter === 'person'}"
                    ng-click="$ctrl.selectFilter('person')">
                👫 <span class="text">Person</span>
                <img src="/static/img/icons/triangle_bottom.svg"/>
            </button>
            <button class="year"
                    ng-class="{selected: $ctrl.selectedFilter === 'year'}"
                    ng-click="$ctrl.selectFilter('year')">
                🎆 <span class="text">Jahr</span>
                <img src="/static/img/icons/triangle_bottom.svg"/>
            </button>
            <form ng-submit="$ctrl.search()">
                <input ng-model="$ctrl.searchText"
                       ng-class="{selected: $ctrl.selectedFilter === 'text'}"
                       ng-focus="$ctrl.selectFilter('text')"
                       placeholder="Inhalte suchen...">
                <button type="submit" ng-class="{selected: $ctrl.selectedFilter === 'text'}">🔎</button>
            </form>
        </div>
        <div class="topics" ng-show="$ctrl.selectedFilter === 'topic'">
            <h2>Wähle eine Thema</h2>
            <ul>
                <li ng-repeat="topic in [1,2,3,4,5,6,7,8,9]">
                    Thema {{$index}}
                </li>
            </ul>
        </div>
        <div class="people" ng-show="$ctrl.selectedFilter === 'person'">
            <h2>Wähle einen Abgeordneten</h2>
            <input type="text" ng-model="$ctrl.speakerSearch" placeholder="Abgeordnete suchen..."/>
            <ul>
                <li ng-repeat="speaker in $ctrl.speakers | filter : $ctrl.speakerSearch | filter: $ctrl.filterSpeakers">
                    <input type="checkbox"
                           id="speaker-{{$index}}"
                           ng-checked="$ctrl.selectedSpeakers.indexOf(speaker) !== -1"
                           ng-click="$ctrl.togglSpeaker(speaker)"/>

                    <label for="speaker-{{$index}}">
                        <div ng-if="speaker.speaker_party" class="person">
                            <img src="http://www.bundestag.de/image/240714/3x4/162/216/be23238d3921acf3e9fa694ab1ae41f8/dZ/aken_jan_gross.jpg" />
                            <div class="name">{{speaker.speaker_cleaned}}</div>
                            <div class="party">{{speaker.speaker_party}}</div>
                         </div>
                        <div ng-if="!speaker.speaker_party" class="person">
                            <img src="http://www.bundestag.de/image/240714/3x4/162/216/be23238d3921acf3e9fa694ab1ae41f8/dZ/aken_jan_gross.jpg" />
                            <div class="name">{{speaker.speaker_name}}</div>
                        </div>

                    </label>
                </li>
            </ul>
        </div>
        <div class="years" ng-show="$ctrl.selectedFilter === 'year'">
            <h2>Wähle eine Jahr</h2>
            <ul>
                <li ng-repeat="year in [2013, 2014, 2015, 2016, 2017]">
                    {{year}}
                </li>
            </ul>
        </div>

        <div class="selections">
            <ul>
                <li ng-repeat="speaker in $ctrl.selectedSpeakers">
                    {{speaker.speaker_cleaned}} <a ng-click="$ctrl.togglSpeaker(speaker)">x</a>
                </li>
            </ul>
            <button ng-disabled="!$ctrl.selectedSpeakers.length" ng-click="$ctrl.search()">Los</button>
        </div>
    </div>
    <div class="tops container-left-16">
        <table>
            <thead>
            <tr>
                <th>Sitzung</th>
                <th>Tagesordnungspunkte</th>
            </tr>
            </thead>
            <tbody ng-if="!$ctrl.loading && $ctrl.sessions.length">
            <tr ng-repeat="session in $ctrl.sessions">
                <td><span>{{session.session.sitzung}}.</span></td>
                <td>
                    <ul ng-repeat="top in session.tops">
                        <li><a href="http://protokolle.datenschule.de/session/{{session.session.sitzung}}#top-{{top}}">{{top}}</a>
                        </li>
                    </ul>
                </td>
            </tr>
            </tbody>
        </table>

        <div class="loader" ng-if="$ctrl.loading"></div>

        <div ng-if="!$ctrl.loading && !$ctrl.sessions.length">
            🕵Wir haben gesucht aber nichts gefunden...
        </div>
    </div>
</div>
